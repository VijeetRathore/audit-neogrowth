<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Branch Audit</title>

<style>
body{font-family:Arial;padding:20px}
.section{border:1px solid #aaa;padding:15px;margin-top:20px}
.hidden{display:none}
label{font-weight:bold}
hr{margin:15px 0}
  
.preview-img {
  width: 100px;
  height: 100px;
  object-fit: cover;
  margin-top: 10px;
  border: 1px solid #ddd;
  display: none; /* Shuruat mein hidden rahega */
}
/* multi-page */
.form-page{display:none}
.form-page.active{display:block}
.navbar{display:flex;gap:10px;margin-top:20px}
.navbar button{padding:10px 14px;cursor:pointer}
/* ===== SUCCESS TOAST ===== */
.toast{
  position:fixed;
  bottom:30px;
  left:50%;
  transform:translateX(-50%);
  background:#28a745;
  color:white;
  padding:14px 22px;
  border-radius:8px;
  font-size:16px;
  box-shadow:0 4px 10px rgba(0,0,0,0.3);
  z-index:9999;
  opacity:0;
  transition:opacity 0.4s ease;
}
.toast.show{
  opacity:1;
}
.hidden{
  display:none;
}

/* ===== LOADING OVERLAY ===== */
#submitOverlay{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.6);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9998;
}
  #submitOverlay.hidden { display: none !important; }

.overlay-box{
  background:white;
  padding:30px;
  border-radius:10px;
  text-align:center;
  width:300px;
}

.progress-bar{
  width:100%;
  height:12px;
  background:#ddd;
  border-radius:10px;
  overflow:hidden;
  margin-top:15px;
}

.progress-fill{
  height:100%;
  width:0%;
  background:#007bff;
  transition:width 0.3s ease;
}
  
</style>
</head>

<body>

<h2>Branch Compliance Audit</h2>
<!-- ====== MULTI-PAGE WRAPPER START ====== -->
<div id="page1" class="form-page active">
  <h3>Page 1</h3>  

<!-- ================= BASIC DETAILS ================= -->

<label>Select State</label><br>
<select id="state" onchange="loadBranches();applyLanguage()">
<option value="">--Select--</option>
<option value="Andhra Pradesh">ఆంధ్రప్రదేశ్ / Andhra Pradesh</option>
<option value="Telangana">తెలంగాణ / Telangana</option>
<option value="Tamil Nadu">தமிழ்நாடு / Tamil Nadu</option>
<option value="Karnataka">ಕರ್ನಾಟಕ / Karnataka</option>
<option value="Delhi">दिल्ली / Delhi</option>
<option value="Gujarat">गुजरात / Gujarat</option>
<option value="Maharashtra">महाराष्ट्र / Maharashtra</option>
<option value="Rajasthan">राजस्थान / Rajasthan</option>
<option value="Uttar Pradesh">उत्तर प्रदेश / Uttar Pradesh</option>
<option value="West Bengal">পশ্চিমবঙ্গ / West Bengal</option>
<option value="Punjab">ਪੰਜਾਬ / Punjab</option>
<option value="Haryana">हरियाणा / Haryana</option>
<option value="Madhya Pradesh">मध्य प्रदेश / Madhya Pradesh</option>
<option value="Odisha">ଓଡ଼ିଶା / Odisha</option>
<option value="Puducherry">புதுச்சேரி / Puducherry</option>
<option value="Jharkhand">झारखंड / Jharkhand</option>
<option value="Chandigarh">चंडीगढ़ / Chandigarh</option>
</select>

<br><br>

<label>Select Branch</label><br>
<select id="branch" onchange="checkConditions()"></select>

<br><br>

<label>Name of Branch Head</label><br>
<input type="text" id="branchHead">

<br><br>

<label>Name of Office Boy</label><br>
<input type="text" id="officeBoy">

<!-- ================= COMPLIANCE ================= -->

<div class="section">
<h3>Compliance</h3>

<script>
function questionBlock(qid){
  let isSimple = (qid === "q1" || qid === "q2");

  document.write(`
    <p id="${qid}Text"></p>
<input type="radio" name="${qid}" value="Yes" onclick="toggle('${qid}',true)" required> <span class="yesText">Yes</span>
<input type="radio" name="${qid}" value="No" onclick="toggle('${qid}',false)" required> <span class="noText">No</span>
    <div id="${qid}" class="hidden">
      ${isSimple ? '' : `
        Version No <input type="text" class="detail-input"><br>
        Issue Date <input type="date" class="detail-input"><br>
        Effective Date <input type="date" class="detail-input"><br>
      `}
      <input type="file" accept="image/*" onchange="showPreview(event, '${qid}Img')">
      <br><img id="${qid}Img" class="preview-img">
    </div>
    <hr>
  `);
}
</script>

<script>
["q1","q2","q3","q4","q5","q6","q7","q8","q9","q10"].forEach(questionBlock);
</script>

<!-- File only questions -->
<script>
["q11","q12","q13","q14","q15","q16"].forEach(q=>{
  document.write(`
    <p id="${q}Text"></p>
 <input type="radio" name="${q}" value="Yes" onclick="toggle('${q}',true)"> <span class="yesText">Yes</span>
<input type="radio" name="${q}" value="No" onclick="toggle('${q}',false)"> <span class="noText">No</span>
    <div id="${q}" class="hidden">
      <input type="file" accept="image/*" onchange="showPreview(event, '${q}Img')">
      <br><img id="${q}Img" class="preview-img">
    </div>
    <hr>
  `);
});
</script>

<!-- Trade License -->
<div id="tradeSection" class="hidden">
  <p id="q17Text"></p>
<input type="radio" name="q17" value="Yes" onclick="toggle('q17Div',true)"> <span class="yesText">Yes</span>
<input type="radio" name="q17" value="No" onclick="toggle('q17Div',false)"> <span class="noText">No</span>
  <div id="q17Div" class="hidden">
    <input type="file" accept="image/*" onchange="showPreview(event, 'q17Img')">
    <br><img id="q17Img" class="preview-img">
  </div>
  <hr>
</div>

<!-- ISO -->
<div id="isoSection" class="hidden">
  <p id="q18Text"></p>
 <input type="radio" name="q18" value="Yes" onclick="toggle('q18Div',true)"> <span class="yesText">Yes</span>
<input type="radio" name="q18" value="No" onclick="toggle('q18Div',false)"> <span class="noText">No</span>
  <div id="q18Div" class="hidden">
    <input type="file" accept="image/*" onchange="showPreview(event, 'q18Img')">
    <br><img id="q18Img" class="preview-img">
  </div>
</div>
</div>
  <!-- Page 1 Buttons -->
  <div class="navbar">
  <button type="button" class="btn-back" onclick="prevPage()" disabled>Back</button>
  <button type="button" class="btn-next" onclick="submitAndNext(this)">
    Submit and move to next page
  </button>
</div>

<div id="page2" class="form-page">
  <h3>Page 2</h3>

  <!-- Q19 -->
  <p id="q19Text"></p>
  <label><input type="radio" name="q19" value="Yes" onclick="toggle('q19Div',true)"> <span class="yesText">Yes</span></label>
  <label><input type="radio" name="q19" value="No" onclick="toggle('q19Div',false)"> <span class="noText">No</span></label>
  <div id="q19Div" class="hidden">
    <input type="file" accept="image/*" onchange="showPreview(event,'q19Img')">
    <br><img id="q19Img" class="preview-img">
  </div>
  <hr>

  <!-- Q20 -->
  <p id="q20Text"></p>
  <label><input type="radio" name="q20" value="Yes" onclick="toggle('q20Div',true)"> <span class="yesText">Yes</span></label>
  <label><input type="radio" name="q20" value="No" onclick="toggle('q20Div',false)"> <span class="noText">No</span></label>
  <div id="q20Div" class="hidden">
    <input type="file" accept="image/*" onchange="showPreview(event,'q20Img')">
    <br><img id="q20Img" class="preview-img">
  </div>
  <hr>

  <!-- Q21 (Multi-photo + instruction) -->
  <p id="q21Text"></p>
  <label><input type="radio" name="q21" value="Yes" onclick="toggle('q21Div',true)"> <span class="yesText">Yes</span></label>
  <label><input type="radio" name="q21" value="No" onclick="toggle('q21Div',false)"> <span class="noText">No</span></label>
  <div id="q21Div" class="hidden">
    <div id="q21Tip" style="margin:8px 0; font-size:13px;"></div>

    <div id="q21Photos"></div>
    <button type="button" onclick="addMorePhoto('q21Photos')">+ Add more photo</button>
  </div>
  <hr>

  <!-- Q22 -->
  <p id="q22Text"></p>
  <label><input type="radio" name="q22" value="Yes" onclick="toggle('q22Div',true)"> <span class="yesText">Yes</span></label>
  <label><input type="radio" name="q22" value="No" onclick="toggle('q22Div',false)"> <span class="noText">No</span></label>
  <div id="q22Div" class="hidden">
    <input type="file" accept="image/*" onchange="showPreview(event,'q22Img')">
    <br><img id="q22Img" class="preview-img">
  </div>
  <hr>

  <!-- Q23 -->
  <p id="q23Text"></p>
  <label><input type="radio" name="q23" value="Yes" onclick="toggle('q23Div',true)"> <span class="yesText">Yes</span></label>
  <label><input type="radio" name="q23" value="No" onclick="toggle('q23Div',false)"> <span class="noText">No</span></label>
  <div id="q23Div" class="hidden">
    <input type="file" accept="image/*" onchange="showPreview(event,'q23Img')">
    <br><img id="q23Img" class="preview-img">
  </div>
  <hr>

  <!-- Q24 -->
  <p id="q24Text"></p>
  <label><input type="radio" name="q24" value="Yes" onclick="toggle('q24Div',true)"> <span class="yesText">Yes</span></label>
  <label><input type="radio" name="q24" value="No" onclick="toggle('q24Div',false)"> <span class="noText">No</span></label>
  <div id="q24Div" class="hidden">
    <input type="file" accept="image/*" onchange="showPreview(event,'q24Img')">
    <br><img id="q24Img" class="preview-img">
  </div>
  <hr>

  <!-- Q25 (Fire Extinguishers: count + N photos + N expiry dates) -->
  <p id="q25Text"></p>
  <label><input type="radio" name="q25" value="Yes" onclick="toggleFireExt(true)"> <span class="yesText">Yes</span></label>
  <label><input type="radio" name="q25" value="No" onclick="toggleFireExt(false)"> <span class="noText">No</span></label>

  <div id="q25Div" class="hidden">
    <div style="margin:8px 0;">
      <label id="q25CountLabel">Select number of fire extinguishers (max 15):</label><br>
      <select id="q25Count" onchange="renderFireExtinguishers(this.value)">
        <option value="">--Select--</option>
      </select>
    </div>

    <div id="q25Items"></div>
  </div>
  <hr>

  <!-- Q26 -->
  <p id="q26Text"></p>
  <label><input type="radio" name="q26" value="Yes" onclick="toggle('q26Div',true)"> <span class="yesText">Yes</span></label>
  <label><input type="radio" name="q26" value="No" onclick="toggle('q26Div',false)"> <span class="noText">No</span></label>
  <div id="q26Div" class="hidden">
    <input type="file" accept="image/*" onchange="showPreview(event,'q26Img')">
    <br><img id="q26Img" class="preview-img">
  </div>
  <hr>

  <!-- Q27 -->
  <p id="q27Text"></p>
  <label><input type="radio" name="q27" value="Yes" onclick="toggle('q27Div',true)"> <span class="yesText">Yes</span></label>
  <label><input type="radio" name="q27" value="No" onclick="toggle('q27Div',false)"> <span class="noText">No</span></label>
  <div id="q27Div" class="hidden">
    <input type="file" accept="image/*" onchange="showPreview(event,'q27Img')">
    <br><img id="q27Img" class="preview-img">
  </div>

  <div class="navbar">
    <button type="button" class="btn-back" onclick="prevPage()">Back</button>
    <button type="button" class="btn-next" onclick="submitAndNext(this)">Submit and move to next page</button>
  </div>
</div>

<div id="page3" class="form-page">
  <h3>Page 3</h3>
  <p>Page 3 questions yahan add honge.</p>
  <div class="navbar"><button type="button" class="btn-back" onclick="prevPage()">Back</button>
<button type="button" class="btn-next" onclick="submitAndNext(this)">Submit and move to next page</button>
  </div>
</div>

<div id="page4" class="form-page">
  <h3>Page 4</h3>
  <p>Page 4 questions yahan add honge.</p>
  <div class="navbar"><button type="button" class="btn-back" onclick="prevPage()">Back</button>
<button type="button" class="btn-next" onclick="submitAndNext(this)">Submit and move to next page</button>
  </div>
</div>

<div id="page5" class="form-page">
  <h3>Page 5</h3>
  <p>Page 5 questions yahan add honge.</p>
  <div class="navbar"><button type="button" class="btn-back" onclick="prevPage()">Back</button>
<button type="button" class="btn-next" onclick="submitAndNext(this)">Submit and move to next page</button>
  </div>
</div>

<div id="page6" class="form-page">
  <h3>Page 6</h3>
  <p>Page 6 questions yahan add honge.</p>
  <div class="navbar"><button type="button" class="btn-back" onclick="prevPage()">Back</button>
    <button type="button" class="btn-next" onclick="submitAndNext(this)">Final Submit</button>
  </div>
</div>
  
 <script>
   let currentPage = 1;
const totalPages = 6;
   let progressInterval;
let currentProgress = 0;

function showOverlay() {
  document.getElementById("submitOverlay").classList.remove("hidden");
  // Dynamic wait message (English + Local)
document.getElementById("overlayMessage").innerHTML =
  "Wait submitting data...<br>" +
  (currentMessages?.wait || "Please wait, submitting data...");
  currentProgress = 0;
  updateProgress(0);

  progressInterval = setInterval(() => {
    if (currentProgress < 95) {
      currentProgress += 1;
      updateProgress(currentProgress);
    }
  }, 40); // smooth animation
}

function updateProgress(value) {
  document.getElementById("progressFill").style.width = value + "%";
  document.getElementById("progressText").innerText = value + "%";
}

function hideOverlay() {
  clearInterval(progressInterval);
  document.getElementById("submitOverlay").classList.add("hidden");
}
function showPage(pageNumber) {
  document.querySelectorAll('.form-page').forEach(p => {
    p.classList.remove('active');
  });
  const nextPage = document.getElementById('page' + pageNumber);
  if (nextPage) {
    nextPage.classList.add('active');
    currentPage = pageNumber;
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }
}
function prevPage() {
  if (currentPage > 1) {
    showPage(currentPage - 1);
  }
}
async function submitAndNext(btn) {
  const success = await submitForm(btn);

  if (success && currentPage < totalPages) {
    showPage(currentPage + 1);
  }
}
  async function submitForm(btn) {
  const submitBtn = btn;
  submitBtn.innerText = (currentMessages?.wait || "Sending...");
  submitBtn.disabled = true;
  showOverlay();

  // ================= VALIDATION CODE START (Yahan paste karein) =================
  const requiredIds = ['state', 'branch', 'branchHead', 'officeBoy'];
  let firstErrorField = null;

  requiredIds.forEach(id => {
    const el = document.getElementById(id);
    if (!el.value.trim()) {
      el.style.border = "2px solid red"; 
      if (!firstErrorField) firstErrorField = el;
    } else {
      el.style.border = ""; 
    }
  });

for (let i = 1; i <= 18; i++) {
    const qid = 'q' + i;
    const qText = document.getElementById(qid + 'Text');
    const isVisible = qText && qText.offsetParent !== null;

    if (isVisible) {
      const radioChecked = document.querySelector(`input[name="${qid}"]:checked`);
      const imgElement = document.getElementById(qid + 'Img');
      const isPhotoSelected = imgElement && imgElement.src && imgElement.src.startsWith('data:image');
      const versionInput = document.querySelector(`#${qid} input[type="text"]`);
const isVersionMissing = radioChecked && radioChecked.value === "Yes" && versionInput && !versionInput.value.trim();

if (versionInput) {
  versionInput.style.border = isVersionMissing ? "2px solid red" : "";
}
      
      // --- Date Validation Logic ---
      const dateInputs = document.querySelectorAll(`#${qid} input[type="date"]`);
      let isDateInvalid = false;
      const currentYear = new Date().getFullYear();

      dateInputs.forEach(input => {
        if (input.value) {
          const inputYear = new Date(input.value).getFullYear();
          // 2000 se purani ya future ki bahut aage ki dates block karein
          if (inputYear < 2019 || inputYear > 2026) {
            isDateInvalid = true;
            input.style.border = "2px solid red";
          } else {
            input.style.border = "";
          }
        }
      });

      // --- Main Checks ---
      if (!radioChecked) {
        qText.style.color = "red"; 
        if (!firstErrorField) firstErrorField = qText;
      } 
    else if (isVersionMissing) {
    qText.style.color = "red";
    if (!qText.innerText.includes(currentMessages.version))
        qText.innerText += " (" + currentMessages.version + ")";
    if (!firstErrorField) firstErrorField = qText;
}
      else if (radioChecked.value === "Yes" && !isPhotoSelected) {
  qText.style.color = "red";
  const msg = currentMessages.photo || "PHOTO REQUIRED!";
  if (!qText.innerText.includes(msg)) qText.innerText += " (" + msg + ")";
  if (!firstErrorField) firstErrorField = qText;
}
else if (isDateInvalid) {
  qText.style.color = "red";
  const msg = currentMessages.date || "INVALID DATE!";
  if (!qText.innerText.includes(msg)) qText.innerText += " (" + msg + ")";
  if (!firstErrorField) firstErrorField = qText;
}
else {
  qText.style.color = "";
  const pm = currentMessages.photo || "PHOTO REQUIRED!";
  const id = currentMessages.date || "INVALID DATE!";
  const ver = currentMessages.version || "Please enter Version No!";
  qText.innerText = qText.innerText
    .replace(" (" + pm + ")", "")
    .replace(" (" + id + ")", "")
    .replace(" (" + ver + ")", "");
}
    }
  }
  if (firstErrorField) {
    firstErrorField.scrollIntoView({ behavior: 'smooth', block: 'center' });
    alert("Kripya saari jankari bharein (Red highlighted).");
    submitBtn.innerText = (currentMessages?.next || "Submit and move to next page");
    submitBtn.disabled = false;
    hideOverlay();
    return false;
  }
  // ================= VALIDATION CODE END =================

  // Iske niche aapka purana auditData collection wala logic rahega...
  
  const auditData = {
    state: document.getElementById('state').value,
    branch: document.getElementById('branch').value,
    branchHead: document.getElementById('branchHead').value,
    officeBoy: document.getElementById('officeBoy').value,
    responses: {}
  };

  for (let i = 1; i <= 18; i++) {
    let qid = 'q' + i;
    let radio = document.querySelector(`input[name="${qid}"]:checked`);
    let img = document.getElementById(qid + 'Img');

    auditData.responses[qid] = {
      answer: radio ? radio.value : "",
      version: document.querySelector(`#${qid} input.detail-input:nth-of-type(1)`)?.value || "",
      issueDate: document.querySelector(`#${qid} input.detail-input:nth-of-type(2)`)?.value || "",
      effectiveDate: document.querySelector(`#${qid} input.detail-input:nth-of-type(3)`)?.value || "",
      photo: (img && img.src.startsWith('data:image')) ? img.src : ""
    };
  }

  const webhookURL = "https://script.google.com/macros/s/AKfycbxJcJxRR3pJbdPw3OszNyWZaMvsafNIyzp_Hp-olnMzarBZLgeQHhwA49h9S3prPeoY/exec";

  try {
    const response = await fetch(webhookURL, {
  method: "POST",
  mode: "no-cors", // <--- Yeh line add karein
  body: JSON.stringify(auditData),
  headers: { "Content-Type": "text/plain;charset=utf-8" } // <--- Ise badal dein
});

    // no-cors mode mein response read nahi hota, isliye hum assume karte hain ki data chala gaya
// Progress ko 100% karein
clearInterval(progressInterval);
updateProgress(100);

// Success message overlay mein (Dynamic Language)
document.getElementById("overlayMessage").innerHTML =
  "Submitted Successfully! <br>" +
  (currentMessages?.success || "Data submitted successfully");

// Overlay thoda rukega
setTimeout(() => {
  hideOverlay();

  // Toast message (Dynamic)
  const toast = document.getElementById("successToast");
  toast.innerText =
    (currentMessages?.success || "Data submitted successfully");
  toast.classList.remove("hidden");
  toast.classList.add("show");

  setTimeout(() => {
    toast.classList.remove("show");
    toast.classList.add("hidden");
  }, 3000);

}, 800);

return true;
    
  } catch (err) {
    console.error(err);
    alert("Connection Error!");
    hideOverlay();
    return false;
  } finally {
    submitBtn.innerText = (currentMessages?.next || "Submit and move to next page");
    submitBtn.disabled = false;
  }
}
</script>
<!-- ================= SCRIPT ================= -->

<script>
function toggle(id,show){
 document.getElementById(id).style.display = show ? "block" : "none";
}

const branchMap={
"Andhra Pradesh":["Tirupati","Vijayawada","Visakhapatnam"],
"Telangana":["Hyderabad"],
"Tamil Nadu":["Chennai","Coimbatore","Madurai","Salem","Tirupur","Tiruvallur"],
"Karnataka":["Bangalore","Belgaum","Gulbarga","Hubballi","Mangalore","Mysore","Tumkur"],
"Delhi":["Delhi"],
"Gujarat":["Ahmedabad","Baroda","Rajkot","Surat"],
"Maharashtra":["Aurangabad","Borivali","Kolhapur","Nagpur","Nashik","Pune","Thane"],
"Rajasthan":["Ajmer","Jaipur","Jodhpur","Sikar","Udaipur"],
"Uttar Pradesh":["Lucknow"],
"West Bengal":["Kolkata"],
"Punjab":["Jalandhar","Ludhiana"],
"Haryana":["Panipat"],
"Madhya Pradesh":["Bhopal","Gwalior","Indore"],
"Odisha":["Bhubaneswar"],
"Puducherry":["Puducherry"],
"Jharkhand":["Jamshedpur"],
"Chandigarh":["Chandigarh"]
};

const trade=["Bhubaneswar","Hyderabad","Kolkata","Puducherry","Tirupati"];
const iso=["Bangalore","Chennai","Delhi","Hyderabad","Jaipur","Pune","Kolkata","Coimbatore","Ahmedabad"];

function loadBranches(){
branch.innerHTML="";
(branchMap[state.value]||[]).forEach(b=>{
let o=document.createElement("option");
o.text=o.value=b;
branch.add(o);
});
checkConditions();
}

function checkConditions(){
tradeSection.style.display = trade.includes(branch.value) ? "block" : "none";
isoSection.style.display = iso.includes(branch.value) ? "block" : "none";
}
</script>

<script>
const QUESTIONS={
q1:{hi:"क्या RBI certificate  Notice बोर्ड पर प्रदर्शित है?/Is RBI certificate displayed on the notice Board?",
te:"నోటీసు బోర్డులో  RBI certificate   ప్రదర్శించబడిందా?/Is RBI certificate displayed on the notice Board?",
ta:"அறிவிப்பு பலகையில் RBI certificate  காட்டப்பட்டுள்ளதா?/Is RBI certificate displayed on the notice Board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  RBI certificate ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is RBI certificate displayed on the notice Board?"},
q2:{hi:"क्या Certificate of Incorporation  Notice बोर्ड पर प्रदर्शित है?/Is Certificate of Incorporation displayed on notice board?",
te:"నోటీసు బోర్డులో  Certificate of Incorporation   ప్రదర్శించబడిందా?/Is Certificate of Incorporation displayed on notice board?",
ta:"அறிவிப்பு பலகையில் Certificate of Incorporation  காட்டப்பட்டுள்ளதா?/Is Certificate of Incorporation displayed on notice board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  Certificate of Incorporation ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is Certificate of Incorporation displayed on notice board?"},
q3:{hi:"क्या Grievance Redressal Policy  Notice बोर्ड पर प्रदर्शित है?/Is Grievance Redressal Policy on the notice Board?",
te:"నోటీసు బోర్డులో  Grievance Redressal Policy   ప్రదర్శించబడిందా?/Is Grievance Redressal Policy on the notice Board?",
ta:"அறிவிப்பு பலகையில் Grievance Redressal Policy  காட்டப்பட்டுள்ளதா?/Is Grievance Redressal Policy on the notice Board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  Grievance Redressal Policy ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is Grievance Redressal Policy on the notice Board?"},
q4:{hi:"क्या Employee Grievance Resolution Policy  Notice बोर्ड पर प्रदर्शित है?/Is Employee Grievance Resolution Policy on the notice Board?",
te:"నోటీసు బోర్డులో  Employee Grievance Resolution Policy   ప్రదర్శించబడిందా?/Is Employee Grievance Resolution Policy on the notice Board?",
ta:"அறிவிப்பு பலகையில் Employee Grievance Resolution Policy  காட்டப்பட்டுள்ளதா?/Is Employee Grievance Resolution Policy on the notice Board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  Employee Grievance Resolution Policy ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is Employee Grievance Resolution Policy on the notice Board?"},
q5:{hi:"क्या Collection code of conduct  Notice बोर्ड पर प्रदर्शित है?/Is Collection code of conduct on the notice Board?",
te:"నోటీసు బోర్డులో  Collection code of conduct   ప్రదర్శించబడిందా?/Is Collection code of conduct on the notice Board?",
ta:"அறிவிப்பு பலகையில் Collection code of conduct  காட்டப்பட்டுள்ளதா?/Is Collection code of conduct on the notice Board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  Collection code of conduct ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is Collection code of conduct on the notice Board?"},
q6:{hi:"क्या Whistle Blower Policy  Notice बोर्ड पर प्रदर्शित है?/Is Whistle Blower Policy on the notice Board?",
te:"నోటీసు బోర్డులో  Whistle Blower Policy   ప్రదర్శించబడిందా?/Is Whistle Blower Policy on the notice Board?",
ta:"அறிவிப்பு பலகையில் Whistle Blower Policy  காட்டப்பட்டுள்ளதா?/Is Whistle Blower Policy on the notice Board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  Whistle Blower Policy ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is Whistle Blower Policy on the notice Board?"},
q7:{hi:"क्या Code of conduct  Notice बोर्ड पर प्रदर्शित है?/Is Code of conduct on the notice Board?",
te:"నోటీసు బోర్డులో  Code of conduct   ప్రదర్శించబడిందా?/Is Code of conduct on the notice Board?",
ta:"அறிவிப்பு பலகையில் Code of conduct  காட்டப்பட்டுள்ளதா?/Is Code of conduct on the notice Board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  Code of conduct ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is Code of conduct on the notice Board?"},
q8:{hi:"क्या Quality Policy  Notice बोर्ड पर प्रदर्शित है?/Is Quality Policy on the notice Board?",
te:"నోటీసు బోర్డులో  Quality Policy   ప్రదర్శించబడిందా?/Is Quality Policy on the notice Board?",
ta:"அறிவிப்பு பலகையில் Quality Policy  காட்டப்பட்டுள்ளதா?/Is Quality Policy on the notice Board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  Quality Policy ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is Quality Policy on the notice Board?"},
q9:{hi:"क्या Sexual Harassment policy  Notice बोर्ड पर प्रदर्शित है?/Is Sexual Harassment policy on the notice Board?",
te:"నోటీసు బోర్డులో  Sexual Harassment policy   ప్రదర్శించబడిందా?/Is Sexual Harassment policy on the notice Board?",
ta:"அறிவிப்பு பலகையில் Sexual Harassment policy  காட்டப்பட்டுள்ளதா?/Is Sexual Harassment policy on the notice Board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  Sexual Harassment policy ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is Sexual Harassment policy on the notice Board?"},
q10:{hi:"क्या Fair Practice Code  Notice बोर्ड पर प्रदर्शित है?/Is Fair Practice Code on the notice Board?",
te:"నోటీసు బోర్డులో  Fair Practice Code   ప్రదర్శించబడిందా?/Is Fair Practice Code on the notice Board?",
ta:"அறிவிப்பு பலகையில் Fair Practice Code  காட்டப்பட்டுள்ளதா?/Is Fair Practice Code on the notice Board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  Fair Practice Code ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is Fair Practice Code on the notice Board?"},
q11:{hi:"क्या Consumer Education Literature on SMA, NPA Classification and Upgradation  Notice बोर्ड पर प्रदर्शित है?/Is Consumer Education Literature on SMA, NPA Classification and Upgradation on the notice Board?",
te:"నోటీసు బోర్డులో  Consumer Education Literature on SMA, NPA Classification and Upgradation   ప్రదర్శించబడిందా?/Is Consumer Education Literature on SMA, NPA Classification and Upgradation on the notice Board?",
ta:"அறிவிப்பு பலகையில் Consumer Education Literature on SMA, NPA Classification and Upgradation  காட்டப்பட்டுள்ளதா?/Is Consumer Education Literature on SMA, NPA Classification and Upgradation on the notice Board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  Consumer Education Literature on SMA, NPA Classification and Upgradation ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is Consumer Education Literature on SMA, NPA Classification and Upgradation on the notice Board?"},
q12:{hi:"क्या Customer Grievance Redressal Mechanism  Notice बोर्ड पर प्रदर्शित है?/Is Customer Grievance Redressal Mechanism on the notice Board?",
te:"నోటీసు బోర్డులో  Customer Grievance Redressal Mechanism   ప్రదర్శించబడిందా?/Is Customer Grievance Redressal Mechanism on the notice Board?",
ta:"அறிவிப்பு பலகையில் Customer Grievance Redressal Mechanism  காட்டப்பட்டுள்ளதா?/Is Customer Grievance Redressal Mechanism on the notice Board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  Customer Grievance Redressal Mechanism ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is Customer Grievance Redressal Mechanism on the notice Board?"},
q13:{hi:"क्या Ombudsman certificate ( 3 languages)  Notice बोर्ड पर प्रदर्शित है?/Is Ombudsman certificate ( 3 languages) on the notice Board?",
te:"నోటీసు బోర్డులో  Ombudsman certificate ( 3 languages)   ప్రదర్శించబడిందా?/Is Ombudsman certificate ( 3 languages) on the notice Board?",
ta:"அறிவிப்பு பலகையில் Ombudsman certificate ( 3 languages)  காட்டப்பட்டுள்ளதா?/Is Ombudsman certificate ( 3 languages) on the notice Board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  Ombudsman certificate ( 3 languages) ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is Ombudsman certificate ( 3 languages) on the notice Board?"},
q14:{hi:"क्या S&E certificate  Notice बोर्ड पर प्रदर्शित है?/Is S&E certificate on the notice Board?",
te:"నోటీసు బోర్డులో  S&E certificate   ప్రదర్శించబడిందా?/Is S&E certificate on the notice Board?",
ta:"அறிவிப்பு பலகையில் S&E certificate  காட்டப்பட்டுள்ளதா?/Is S&E certificate on the notice Board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  S&E certificate ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is S&E certificate on the notice Board?"},
q15:{hi:"क्या GSTN certificate  Notice बोर्ड पर प्रदर्शित है?/Is GSTN certificate on the notice Board?",
te:"నోటీసు బోర్డులో  GSTN certificate   ప్రదర్శించబడిందా?/Is GSTN certificate on the notice Board?",
ta:"அறிவிப்பு பலகையில் GSTN certificate  காட்டப்பட்டுள்ளதா?/Is GSTN certificate on the notice Board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  GSTN certificate ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is GSTN certificate on the notice Board?"},
q16:{hi:"क्या Holiday List  Notice बोर्ड पर प्रदर्शित है?/Is Holiday List on the notice Board?",
te:"నోటీసు బోర్డులో  Holiday List   ప్రదర్శించబడిందా?/Is Holiday List on the notice Board?",
ta:"அறிவிப்பு பலகையில் Holiday List  காட்டப்பட்டுள்ளதா?/Is Holiday List on the notice Board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  Holiday List ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is Holiday List on the notice Board?"},
q17:{hi:"क्या Trade License  Notice बोर्ड पर प्रदर्शित है?/Is Trade License on the notice Board?",
te:"నోటీసు బోర్డులో  Trade License   ప్రదర్శించబడిందా?/Is Trade License on the notice Board?",
ta:"அறிவிப்பு பலகையில் Trade License  காட்டப்பட்டுள்ளதா?/Is Trade License on the notice Board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  Trade License ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is Trade License on the notice Board?"},
q18:{hi:"क्या ISO certificate  Notice बोर्ड पर प्रदर्शित है?/Is ISO certificate on the notice Board?",
te:"నోటీసు బోర్డులో  ISO certificate   ప్రదర్శించబడిందా?/Is ISO certificate on the notice Board?",
ta:"அறிவிப்பு பலகையில் ISO certificate  காட்டப்பட்டுள்ளதா?/Is ISO certificate on the notice Board?",
kn:"ಸೂಚನಾ ಫಲಕದಲ್ಲಿ  ISO certificate ಎಂದು ಪ್ರದರ್ಶಿಸಲಾಗಿದೆಯೇ?/Is ISO certificate on the notice Board?"}
};

const STATE_LANG={
"Andhra Pradesh":"te","Telangana":"te",
"Tamil Nadu":"ta","Karnataka":"kn",
"Delhi":"hi","Gujarat":"hi","Maharashtra":"hi",
"Rajasthan":"hi","Uttar Pradesh":"hi","West Bengal":"hi",
"Punjab":"hi","Haryana":"hi","Madhya Pradesh":"hi",
"Odisha":"hi","Puducherry":"ta","Jharkhand":"hi","Chandigarh":"hi"
};

// Is variable ko function ke bahar rakhein taaki submitForm ise use kar sake
let currentMessages = {}; 

function applyLanguage(){
 const lang = state.value === "" ? "hi" : (STATE_LANG[state.value] || "hi");
 
 // 1. Sawaal translate karein
 Object.keys(QUESTIONS).forEach(q=>{
   const el = document.getElementById(q+"Text");
   if(el) el.innerText = QUESTIONS[q][lang];
 });

 // 2. Labels aur Buttons ke translations
 const msgLabels = {
   hi: {
     y: "हाँ / Yes", n: "नहीं / No",
     next: "save और आगे बढ़ें / Save & Next",
    back: "पीछे जाएं / Back",
     photo: "फोटो अपलोड करें। / UPLOAD PHOTO!",
     date: "Date ठीक करें / WRONG DATE!",
     version: "कृपया Version No भरें / Please enter Version No!",
     pending: "कृपया सारी जानकारी भरें (लाल रंग में हाईलाइट किया गया)। / fill all details (highlighted in red).",
     success: "Report सबमिट हो गया है! / Report Submitted successfully.",
     wait: "कृपया प्रतीक्षा करें, डेटा भेजा जा रहा है…",
   },
   te: {
     y: "అవును / Yes", n: "కాదు / No",
    next: "సేవ్ చేసి కొనసాగండి / Save & Next",
    back: "మునుపటి పేజీకి వెళ్ళండి / Back",
     photo: "ఫోటోను అప్‌లోడ్ చేయండి / UPLOAD PHOTO!",
     date: "తేదీని నిర్ణయించండి / INVALID DATE!",
     version: "దయచేసి version no ని నమోదు చేయండి / Please enter Version No!",
     pending: "దయచేసి అన్ని వివరాలను పూరించండి (ఎరుపు రంగులో హైలైట్ చేయబడింది). / Please fill all details (highlighted in red).",
     success: "నివేదిక విజయవంతంగా సమర్పించబడింది. / Report Submitted successfully.",
     wait: "దయచేసి వేచి ఉండండి, డేటా పంపబడుతోంది…",
   },
   ta: {
     y: "ஆம் / Yes", n: "இல்லை / No",
       next: "சேமித்து தொடரவும் / Save & Next",
    back: "முந்தைய பக்கத்திற்கு செல்லவும் / Back",
     photo: "புகைப்படத்தை பதிவேற்றவும் / UPLOAD PHOTO!",
     date: "தேதியை நிர்ணயிக்கவும் / INVALID DATE!",
     version: "version no ஐ உள்ளிடவும். / Please enter Version No!",
     pending: "தயவுசெய்து அனைத்து விவரங்களையும் நிரப்பவும் (சிவப்பு நிறத்தில் சிறப்பிக்கப்பட்டுள்ளது). / Please fill all details (highlighted in red).",
     success: "அறிக்கை வெற்றிகரமாக சமர்ப்பிக்கப்பட்டது./ Report Submitted successfully.",
     wait: "தயவுசெய்து காத்திருக்கவும், தரவு அனுப்பப்படுகிறது…",
   },
   kn: {
     y: "ಹೌದು / Yes", n: "ಇಲ್ಲ / No",
       next: "ಉಳಿಸಿ ಮತ್ತು ಮುಂದುವರೆಯಿರಿ / Save & Next",
    back: "ಹಿಂದಿನ ಪುಟಕ್ಕೆ ಹೋಗಿ / Back",
     photo: "ಫೋಟೋ ಅಪ್ಲೋಡ್ / UPLOAD PHOTO!",
     date: "ದಿನಾಂಕವನ್ನು ನಿಗದಿಪಡಿಸಿ / INVALID DATE!",
     version: "ದಯವಿಟ್ಟು version no ನಮೂದಿಸಿ / Please enter Version No!",
     pending: "ದಯವಿಟ್ಟು ಎಲ್ಲಾ ವಿವರಗಳನ್ನು ಭರ್ತಿ ಮಾಡಿ (ಕೆಂಪು ಬಣ್ಣದಲ್ಲಿ ಹೈಲೈಟ್ ಮಾಡಲಾಗಿದೆ). / Please fill all details (highlighted in red).",
     success: "ವರದಿಯನ್ನು ಯಶಸ್ವಿಯಾಗಿ ಸಲ್ಲಿಸಲಾಗಿದೆ. / Report Submitted successfully.",
     wait: "ದಯವಿಟ್ಟು ಕಾಯಿರಿ, ಡೇಟಾ ಕಳುಹಿಸಲಾಗುತ್ತಿದೆ…",
   }
 };

 currentMessages = msgLabels[lang];
  // Back aur Next buttons translate karein
document.querySelectorAll(".btn-back").forEach(b => 
  b.innerText = currentMessages.back || "Back"
);

document.querySelectorAll(".btn-next").forEach(b => 
  b.innerText = currentMessages.next || "Save & Next"
);

 // 3. Yes/No aur Button translate karein
 document.querySelectorAll(".yesText").forEach(el => el.innerText = currentMessages.y);
 document.querySelectorAll(".noText").forEach(el => el.innerText = currentMessages.n);
 
 const btnLabel = document.getElementById("btnText");
 if(btnLabel) btnLabel.innerText = currentMessages.submit;
}
  
  // Photo preview dikhane ke liye ye function zaroori hai
function showPreview(event, imgId) {
  const file = event.target.files[0];
  const preview = document.getElementById(imgId);
  
  if (file) {
    const reader = new FileReader();
    reader.onload = function(e) {
      preview.src = e.target.result;
      preview.style.display = "block"; // Image select hote hi dikh jayegi
    };
    reader.readAsDataURL(file);
  }
}
  function showPreview(event, imgId) {
  const file = event.target.files[0];
  const preview = document.getElementById(imgId);
  
  if (file) {
    const reader = new FileReader();
    reader.onload = function(e) {
      preview.src = e.target.result;
      preview.style.display = "block"; // Image select hone par dikhayen
    };
    reader.readAsDataURL(file);
  }
}
</script>
  <!-- SUBMIT LOADING OVERLAY -->
<div id="submitOverlay" class="hidden">
  <div class="overlay-box">
    <div id="overlayMessage"></div>

    <div class="progress-bar">
      <div id="progressFill" class="progress-fill"></div>
    </div>

    <div id="progressText" style="margin-top:10px;font-weight:bold;">
      0%
    </div>
  </div>
</div>
<!-- SUCCESS TOAST -->
<div id="successToast" class="toast hidden"></div>
  
</body>
</html>
































